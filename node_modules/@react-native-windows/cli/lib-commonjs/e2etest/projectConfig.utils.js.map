{"version":3,"file":"projectConfig.utils.js","sourceRoot":"","sources":["../../src/e2etest/projectConfig.utils.ts"],"names":[],"mappings":";;;;;;AAAA,4CAAmB;AACnB,gDAAwB;AACxB,0DAAqD;AAExC,QAAA,YAAY,GAAG,cAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;AAEvD,QAAA,eAAe,GAAG,wCAAwC,CAAC;AAEjE,KAAK,UAAU,QAAQ,CAAC,GAAW;IACxC,IAAI;QACF,MAAM,YAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;KACjD;IAAC,OAAO,GAAG,EAAE,GAAE;AAClB,CAAC;AAJD,4BAIC;AAEM,KAAK,UAAU,mBAAmB,CAAC,MAAc;IACtD,MAAM,UAAU,GAAG,cAAI,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;IAChD,IAAI,YAAE,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;QAC7B,MAAM,YAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;KACxD;IACD,MAAM,QAAQ,CAAC,UAAU,CAAC,CAAC;IAE3B,MAAM,YAAY,GAAG;QACnB,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,YAAY;QACvB,WAAW,EAAE,IAAI;QACjB,gBAAgB,EAAE,uBAAe;QACjC,gBAAgB,EAAE,uBAAe,CAAC,WAAW,EAAE;QAC/C,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,KAAK;QAChB,oBAAoB,EAAE,KAAK;QAC3B,8BAA8B,EAAE;YAC9B;gBACE,EAAE,EAAE,2BAA2B;gBAC/B,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,IAAI;aACjB;YACD;gBACE,EAAE,EAAE,mBAAmB;gBACvB,OAAO,EAAE,SAAS;gBAClB,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;aAClB;YACD;gBACE,EAAE,EAAE,iBAAiB;gBACrB,OAAO,EAAE,SAAS;gBAClB,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;aAClB;SACF;KACF,CAAC;IAEF,MAAM,iCAAc,CAClB,cAAI,CAAC,IAAI,CAAC,oBAAY,EAAE,wBAAwB,CAAC,EACjD,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,gBAAgB,CAAC,EACvC,YAAY,EACZ,IAAI,CACL,CAAC;IAEF,MAAM,OAAO,GAAG,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;IACpD,MAAM,QAAQ,CAAC,OAAO,CAAC,CAAC;IAExB,MAAM,iCAAc,CAClB,cAAI,CAAC,IAAI,CAAC,oBAAY,EAAE,4BAA4B,CAAC,EACrD,cAAI,CAAC,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC,EACxC,YAAY,EACZ,IAAI,CACL,CAAC;IAEF,MAAM,iCAAc,CAClB,cAAI,CAAC,IAAI,CAAC,oBAAY,EAAE,8BAA8B,CAAC,EACvD,cAAI,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC,EACrC,YAAY,EACZ,IAAI,CACL,CAAC;IAEF,MAAM,iCAAc,CAClB,cAAI,CAAC,IAAI,CAAC,oBAAY,EAAE,4CAA4C,CAAC,EACrE,cAAI,CAAC,IAAI,CAAC,UAAU,EAAE,4BAA4B,CAAC,EACnD,YAAY,EACZ,IAAI,CACL,CAAC;AACJ,CAAC;AApED,kDAoEC","sourcesContent":["import fs from 'fs'\nimport path from 'path';\nimport { copyAndReplace } from '../generator-common';\n\nexport const templateRoot = path.resolve('../../../vnext/template');\n\nexport const testProjectGuid = '{416476D5-974A-4EE2-8145-4E331297247E}';\n\nexport async function tryMkdir(dir: string): Promise<void> {\n  try {\n    await fs.promises.mkdir(dir, {recursive: true});\n  } catch (err) {}\n}\n\nexport async function ensureWinUI3Project(folder: string) {\n  const windowsDir = path.join(folder, 'windows');\n  if (fs.existsSync(windowsDir)) {\n    await fs.promises.rmdir(windowsDir, {recursive: true});\n  }\n  await tryMkdir(windowsDir);\n\n  const replacements = {\n    name: 'WithWinUI3',\n    namespace: 'WithWinUI3',\n    useMustache: true,\n    projectGuidUpper: testProjectGuid,\n    projectGuidLower: testProjectGuid.toLowerCase(),\n    useWinUI3: false,\n    useHermes: false,\n    useExperimentalNuget: false,\n    packagesConfigCppNugetPackages: [\n      {\n        id: 'Microsoft.ReactNative.Cxx',\n        version: '1.0.0',\n        hasProps: false,\n        hasTargets: true,\n      },\n      {\n        id: 'Microsoft.UI.Xaml',\n        version: '2.3.4.5',\n        hasProps: false,\n        hasTargets: false,\n      },\n      {\n        id: 'Microsoft.WinUI',\n        version: '3.2.1.0',\n        hasProps: false,\n        hasTargets: false,\n      },\n    ],\n  };\n\n  await copyAndReplace(\n    path.join(templateRoot, 'cpp-app/proj/MyApp.sln'),\n    path.join(windowsDir, 'WithWinUI3.sln'),\n    replacements,\n    null\n  );\n\n  const projDir = path.join(windowsDir, 'WithWinUI3');\n  await tryMkdir(projDir);\n\n  await copyAndReplace(\n    path.join(templateRoot, 'cpp-app/proj/MyApp.vcxproj'),\n    path.join(projDir, 'WithWinUI3.vcxproj'),\n    replacements,\n    null\n  );\n\n  await copyAndReplace(\n    path.join(templateRoot, 'cpp-app/proj/packages.config'),\n    path.join(projDir, 'packages.config'),\n    replacements,\n    null\n  );\n\n  await copyAndReplace(\n    path.join(templateRoot, 'shared-app/proj/ExperimentalFeatures.props'),\n    path.join(windowsDir, 'ExperimentalFeatures.props'),\n    replacements,\n    null\n  );\n}\n"]}